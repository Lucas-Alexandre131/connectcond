<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cadastro</title>
  <link rel="stylesheet" href="/css/style.css" />
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js">
  </script>
</head>

<body>

  <h2>Cadastro</h2>

  <form id="cadastroForm">
    <div class="form-row">
      <!-- Coluna Esquerda -->
      <div class="form-column">
        <label for="username">Nome de usuário</label>
        <input type="text" id="name" required>
        <br>
        <label for="email">E-mail</label>
        <input type="text" id="email" required>
        <br>
        <label for="password">Senha</label>
        <!-- Altere para type="text" para exibir a senha visível -->
        <input type="text" id="password" required>
      </div>

      <!-- Coluna Direita -->
      <div class="form-column">
        <label for="phone">Número do condominio</label>
        <input type="text" id="condo_id" required>
        <br>
        <label for="address">Role</label>
        <input type="text" id="role" required>
        <br>
        <label for="cpf">CPF</label>
        <input type="text" id="cpf" required>
      </div>
    </div>

    <button id="btnCadastrar" type="button">Registrar</button>
  </form>
  <br>
  <p>Já tem uma conta? <a href="login.html">Entrar</a></p>

  <script>
    $(document).ready(function () {
      $("#btnCadastrar").on("click", function () {
        const email = $("#email").val();
        const password =$("#password").val();
        const name = $("#name").val();
        const cpf = $("#cpf").val();
        const role = $("#role").val();
        const condo_id = $("#condo_id").val();
        const picture = ""; // ver isso depois
        $.ajax({
          type: "POST",
          url: "http://localhost:9000/account",
          contentType: "application/json",
          data: JSON.stringify({
            email, password, name, cpf, role, condo_id, picture
          }),
          dataType: "json"
        })
          .done(function (res) {
            console.log("Resposta do servidor: ", res); // resposta do servidor.
          })
          .fail(function (xhr, status, error) {
            console.error("Erro:", { status: status, erro: error, resposta: xhr.responseText }); // resposta do servidor.
          })
        })});
  </script>

</body>

</html>